import e,{createContext as t,useContext as r,useState as n,useRef as o,useEffect as a}from"react";var c,s={exports:{}};
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/c=s,function(){var e={}.hasOwnProperty;function t(){for(var r=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var a=typeof o;if("string"===a||"number"===a)r.push(o);else if(Array.isArray(o)){if(o.length){var c=t.apply(null,o);c&&r.push(c)}}else if("object"===a)if(o.toString===Object.prototype.toString)for(var s in o)e.call(o,s)&&o[s]&&r.push(s);else r.push(o.toString())}}return r.join(" ")}c.exports?(t.default=t,c.exports=t):window.classNames=t}();var i=s.exports;var u=e=>void 0===e,l=(e={},t,r)=>{const n=(o=t.split(/[,[\].]+?/),o.filter(Boolean)).reduce(((e,t)=>(e=>null==e)(e)?e:e[t]),e);var o;return u(n)||n===e?u(e[t])?r:e[t]:n};const f=t(null);f.displayName="RHFContext";function p({control:e,name:t,defaultValue:c}){const s=r(f);if("production"!==process.env.NODE_ENV&&!e&&!s)throw new Error("ðŸ“‹ useWatch is missing `control` prop. https://react-hook-form.com/api#useWatch");const{useWatchFieldsRef:i,useWatchRenderFunctionsRef:p,watchInternal:d,defaultValuesRef:x}=e||s.control,m=n()[1],h=o(),g=o(c);return a((()=>{"production"!==process.env.NODE_ENV&&""===t&&console.warn("ðŸ“‹ useWatch is missing `name` attribute. https://react-hook-form.com/api#useWatch");const e=h.current=(()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const r=(16*Math.random()+e)%16|0;return("x"==t?r:3&r|8).toString(16)}))})(),r=p.current,n=i.current;return n[e]=new Set,r[e]=()=>m({}),d(t,g.current,e),()=>{delete n[e],delete r[e]}}),[t,p,i,d,g]),h.current?d(t,g.current,h.current):u(c)?"string"==typeof t?l(x.current,t):Array.isArray(t)?t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:l(x.current,t)})),{}):x.current:c}var d=function(t){var r=t.name,o=t.field,c=t.type,s=t.register,u=t.uri,l=t.control,f=t.disabled,d=t.setFormValue,x=t.onInputChange,m=n([]),h=m[0],g=m[1],y=n(0),v=y[0],w=y[1],b=n([]),C=b[0],E=b[1],N=n(!1),O=N[0],S=N[1],k=p({control:l,name:r,defaultValue:""});a((function(){if(x&&x(),k&&k.length>0){var e={suggest:{autocomplete:{prefix:k,completion:{field:o,skip_duplicates:!0}}}};fetch("".concat(process.env.REACT_APP_ELASTICSEARCH_URL,"/").concat(u,"/_search?size=5"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){var t=e.suggest.autocomplete.find((function(e){return e.text===k}));if(t){var r=t.options.map((function(e){return e.text}));g(r)}})).catch((function(e){console.log(e)}))}}),[k]);var A,R=function(e){w(0),E([]),S(!1),d(r,e.currentTarget.innerText)};return O&&k&&(A=C.length?e.createElement("ul",{className:"mt-1 max-h-36 overflow-y-auto pl-0 border rounded-md rounded-t-none shadow-lg absolute w-full z-20"},C.map((function(t,r){return e.createElement("li",{className:i("py-2 pl-3 cursor-pointer ",{"bg-gray-100 text-gray-600 ":r===v,"hover:bg-gray-200 bg-white":r!==v}),key:t,onClick:R},t)}))):e.createElement("div",null)),e.createElement("div",{className:"relative"},e.createElement("input",{type:c,name:r,onKeyDown:function(e){if(13===e.keyCode)w(0),S(!1),d(r,C[v]);else if(38===e.keyCode){if(0===v)return;w(v-1)}else if(40===e.keyCode){if(v-1===C.length)return;w(v+1)}},ref:s,onChange:function(e){var t=h.filter((function(e){return e.toLowerCase().indexOf(k.toLowerCase())>-1}));w(0),E(t),S(!0),x&&x()},autoComplete:"off",disabled:f,className:"border-gray-300 rounded-lg shadow-sm w-full h-8"}),A)};export{d as AutocompleteInput};
//# sourceMappingURL=index.js.map
