"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r,n=t(e),o={exports:{}};
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
r=o,function(){var e={}.hasOwnProperty;function t(){for(var r=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var a=typeof o;if("string"===a||"number"===a)r.push(o);else if(Array.isArray(o)){if(o.length){var u=t.apply(null,o);u&&r.push(u)}}else if("object"===a)if(o.toString===Object.prototype.toString)for(var s in o)e.call(o,s)&&o[s]&&r.push(s);else r.push(o.toString())}}return r.join(" ")}r.exports?(t.default=t,r.exports=t):window.classNames=t}();var a=o.exports;var u=e=>void 0===e,s=(e={},t,r)=>{const n=(o=t.split(/[,[\].]+?/),o.filter(Boolean)).reduce(((e,t)=>(e=>null==e)(e)?e:e[t]),e);var o;return u(n)||n===e?u(e[t])?r:e[t]:n};const c=e.createContext(null);c.displayName="RHFContext";function i({control:t,name:r,defaultValue:n}){const o=e.useContext(c);if("production"!==process.env.NODE_ENV&&!t&&!o)throw new Error("ðŸ“‹ useWatch is missing `control` prop. https://react-hook-form.com/api#useWatch");const{useWatchFieldsRef:a,useWatchRenderFunctionsRef:i,watchInternal:l,defaultValuesRef:f}=t||o.control,p=e.useState()[1],d=e.useRef(),x=e.useRef(n);return e.useEffect((()=>{"production"!==process.env.NODE_ENV&&""===r&&console.warn("ðŸ“‹ useWatch is missing `name` attribute. https://react-hook-form.com/api#useWatch");const e=d.current=(()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const r=(16*Math.random()+e)%16|0;return("x"==t?r:3&r|8).toString(16)}))})(),t=i.current,n=a.current;return n[e]=new Set,t[e]=()=>p({}),l(r,x.current,e),()=>{delete n[e],delete t[e]}}),[r,i,a,l,x]),d.current?l(r,x.current,d.current):u(n)?"string"==typeof r?s(f.current,r):Array.isArray(r)?r.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:s(f.current,t)})),{}):f.current:n}exports.AutocompleteInput=function(t){var r=t.name,o=t.field,u=t.type,s=t.register,c=t.uri,l=t.control,f=t.disabled,p=t.setFormValue,d=t.onInputChange,x=e.useState([]),m=x[0],h=x[1],g=e.useState(0),y=g[0],v=g[1],w=e.useState([]),b=w[0],C=w[1],E=e.useState(!1),S=E[0],N=E[1],O=i({control:l,name:r,defaultValue:""});e.useEffect((function(){if(d&&d(),O&&O.length>0){var e={suggest:{autocomplete:{prefix:O,completion:{field:o,skip_duplicates:!0}}}};fetch("".concat(process.env.REACT_APP_ELASTICSEARCH_URL,"/").concat(c,"/_search?size=5"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){var t=e.suggest.autocomplete.find((function(e){return e.text===O}));if(t){var r=t.options.map((function(e){return e.text}));h(r)}})).catch((function(e){console.log(e)}))}}),[O]);var R,j=function(e){v(0),C([]),N(!1),p(r,e.currentTarget.innerText)};return S&&O&&(R=b.length?n.default.createElement("ul",{className:"mt-1 max-h-36 overflow-y-auto pl-0 border rounded-md rounded-t-none shadow-lg absolute w-full z-20"},b.map((function(e,t){return n.default.createElement("li",{className:a("py-2 pl-3 cursor-pointer ",{"bg-gray-100 text-gray-600 ":t===y,"hover:bg-gray-200 bg-white":t!==y}),key:e,onClick:j},e)}))):n.default.createElement("div",null)),n.default.createElement("div",{className:"relative"},n.default.createElement("input",{type:u,name:r,onKeyDown:function(e){if(13===e.keyCode)v(0),N(!1),p(r,b[y]);else if(38===e.keyCode){if(0===y)return;v(y-1)}else if(40===e.keyCode){if(y-1===b.length)return;v(y+1)}},ref:s,onChange:function(e){var t=m.filter((function(e){return e.toLowerCase().indexOf(O.toLowerCase())>-1}));v(0),C(t),N(!0),d&&d()},autoComplete:"off",disabled:f,className:"border-gray-300 rounded-lg shadow-sm w-full h-8"}),R)};
//# sourceMappingURL=index.js.map
